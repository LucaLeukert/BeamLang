// cat - read and print a file
// Usage: beamlang cat.bl <file>

fn cat_file(filename: String) -> number {
    if (file_exists(filename) == false) {
        println("cat: ${filename}: No such file or directory");
        return 1;
    }
    
    let result = read_file(filename);
    match (result) {
        case!ok content => {
            print(content);
            return 0;
        },
        case!err err => {
            println("cat: ${filename}: ${err->message}");
            return 1;
        }
    }
}

fn main(args: [String]) -> number {    
    let code = match (args->first()) {
        case?some filename => cat_file(filename),
        case?none => {
            println("Usage: cat <file>");
            1;
        }
    };
    
    return code;
}
